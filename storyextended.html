<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dialogue Creator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="wrapper">
            <nav>
                <ul class="nav-list">
                    <li><div class="logo"><img src="Images/logo.webp" alt=""></div></li>
                    <li><a href="http://127.0.0.1:5500/index.html" class="btn_header">Dialogue Database</a></li>
                    <li><a href="http://127.0.0.1:5500/index.html" class="btn_header">Dialogue Creator</a></li>
                    <li><a href="#" class="btn_header">AI Dialogue</a></li>
                </ul>
            </nav>
            <!-- End of desktop navigation menu --> 
        </div>
    </header>
    <!-- End of Header Section -->
    <Heading>
        <div class="wrapper">
            <div class="heading">
                <h1>World Of Warcraft: Story Extended - Dialogue Creator</h1>
                <p>For the StoryExtended Addon for World Of Warcraft Classic. Any changes are automatically saved in your browsers local storage. If
                    you don't put in an ID it is automatically generated.</p>
            </div>
            <div class="UtilityBtns">
                <!-- <div class="top-btn"><button id="save-all-btn" title="Saves everything again (Usually not needed as the page auto saves)">Save All</button></div> -->
                <div class="top-btn"><button id= "downloadJsonBtn" title="Download database as Lua for use in the Addon" >Download DataAddon</button></div>
                <div class="top-btn"><button id= "changeAddonSettings" title="Change general addon settings">Addon Settings</button></div><br><br>
                <div class="top-btn"><button id= "toggleuploadDbBtn" title="Upload database to backup your data" >Upload database</button></div>
                <div class="top-btn"><button id= "downloadDbBtn" title="Download database to backup your data" >Download database</button></div>
                <div class="top-btn"><button id= "deleteDbBtn" title="Delete database" >Delete database</button></div>
                <div class="top-btn"><button id= "changeApiKeys" title="Change the API Keys">Change API keys</button></div><br><br>
            </div>
        </div>
        <!--Delete database warning-->
        <div class="dbDelModal">
            <div class="modal-content">
              <h2>Are you sure?</h2>
              <p>This action cannot be undone.</p>
              <div class="button-container">
                <button id="yes-button">Yes</button>
                <button id="no-button">No</button>
              </div>
            </div>
        </div>
        <!--End: Delete database warning-->
        <div class="UtilityBtns">
            <div class="top-btn"><input type="file" id="importFileInput"></div>
            <div class="top-btn"><button id= "uploadDbBtn" title="Upload database to backup your data" >Upload file</button></div>
        </div>
        <div class="APIKeys">
            <form>
                <label for="openAiApiKey">OpenAI API Key:</label><br>
                <input type="password" id="openAiApiKey" name="openAiApiKey" title="Your OpenAI API key. Needed for text generation. Is only saved locally!"><br><br>
                <div class="top-btn"><button id= "saveOpenAiApiKey" title="Save the OpenAI API Key">Save OpenAI API Key</button></div>
                <label for="elevenLabsApiKey">ElevenLabs API Key:</label><br>
                <input type="password" id="elevenLabsApiKey" name="elevenLabsApiKey" title="Your ElevenLabs API key. Needed for audio generation. Is only saved locally!"><br><br>
                <div class="top-btn"><button id= "saveElevenLabsApiKey" title="Save the ElevenLabs API Key">Save ElevenLabs API Key</button></div>
            </form>
        </div>
        <div class="addonSettings">
            <form>
                <label for="dataAddonName">Data Addon Name:</label><br>
                <input type="text" id="dataAddonName" name="dataAddonName" title="The name of your dialogue data addon. The addon will be called 'StoryExtendedData_YOURNAME'"><br><br>
                <label for="addonPriority">Addon Priority:</label><br>
                <input type="number" id="addonPriority" name="addonPriority" title="If more than one dialoge data Addon is present and both specify dialogue for the same NPC the one with the higher priority always takes precedence"><br><br>
                <div class="top-btn"><button id= "saveAddonSettings" title="Save the ElevenLabs API Key">Save Addon Settings</button></div>
            </form>
        </div>
    </Heading>
    <!-- End of Page Heading with Save Button -->
    <inputs>
        <div class="wrapper">
            <div class="outer-left">
                <div class="FirstLevel">
                        <div class="UtilityBtns"><div class="top-btn"><button id= "newDialogueBtn" title="Add a new dialogue">New Dialogue</button></div></div>
                        <div class="line">
                            <form>
                                <label for="ID">ID (auto generated):</label><br>
                                <input type="text" id="ID" name="ID" title="Unique database ID, used for choosing the next dialogue (autogenerated, probably should leave as is)"><br><br>
                            </form>
                        </div>
                        <div class="line">
                            <form action="/database.php">
                                <label for="Name">Name:</label><br>
                                <input type="text" id="Name" name="Name" list="Namelist" title="The name of the NPC or area. Important: the Addon looks for this name exactly"><br><br>
                            </form>
                            <datalist id="Namelist">
                            </datalist>
                        </div>
                </div>
                <div class="SecondLevel">
                    <form action="/database.php">
                        <label for="ConditionType">Condition Type:</label><br>
                        <select name="ConditionType" id="ConditionType" title="Decides when or if this dialogue will be displayed. Example: 'level' gates the dialogue behind the player being a specific level (should only be used together with 'condition value' and 'greeting')">
                            <option value="none" name="ConditionType" id="ConditionType">None</option>
                            <option value="level" name="ConditionType" id="ConditionType">Level needed</option>
                            <option value="quest-id" name="ConditionType" id="ConditionType">Finished Quest</option>
                            <option value="doFirst" name="ConditionType" id="ConditionType" title="If the dialogue with the given ID has been seen by the player this dialogue will show. e.g: If I have talked to one NPC already about X I can now see this dialogue option. 'Please talk to my father about this' -Player talks to father and opens up choice at son 'I have talked to your father'">Has ID "X" been seen?</option>
                        </select>

                        <!-- <input type="text" id="ConditionType" name="ConditionType" title="Decides when or if this dialogue will be displayed. Example: 'level' gates the dialogue behind the player being a specific level (should only be used together with 'condition value' and 'greeting')"><br> -->
                        
                        <label for="ConditionValue">Condition Value:</label><br>
                        <input type="text" id="ConditionValue" name="ConditionValue" title="The value of the condition type. Example: for condition type 'level' put in the level you want the player to reach before being able to access this dialogue (should only be used together with 'condition type' and 'greeting')">
                    </form>
                </div>
                <div class="ThirdLevel">
                    <form action="/database.php">
                        <label for="Greeting" title="Check if this should be starting a dialogue tree. If you start a conversation with an NPC (or trigger a conversation through an event ingame) the Addon looks for the first dialogue 'greeting' which condition can be met and hasn't been seen before. So if you never activate 'greeting' on any of your written dialogue lines they can never be seen ingame.">Greeting:</label><br>
                        <input type="checkbox" id="Greeting" name="Greeting" checked="false" title="Check if this should be starting a dialogue tree. If you start a conversation with an NPC (or trigger a conversation through an event ingame) the Addon looks for the first dialogue 'greeting' which condition can be met and hasn't been seen before. So if you never activate 'greeting' on any of your written dialogue lines they can never be seen ingame."><br><br>
                        <label for="UseAudio" title="Only check if you are providing an audio file for the dialogue line. These must go into the Addon folder under '/Audio/{name}.{ID}.mp3' whereas {name} means the name of the NPC/event as written in the Name field and {ID} is the ID of the dialogue as written in the ID field">Use Audio:</label><br>
                        <input type="checkbox" id="UseAudio" name="UseAudio" title="Only check if you are providing an audio file for the dialogue line. These must go into the Addon folder under '/Audio/{name}.{ID}.mp3' whereas {name} means the name of the NPC/event as written in the Name field and {ID} is the ID of the dialogue as written in the ID field">
                    </form>
                </div>
                <div class="FourthLevel">
                    <label for="Text">Enter Text:</label><br>
                    <textarea id="Text" name="Text" rows="4" cols="50" title="The NPC dialogue lines. It's best to keep these under 200 characters long"></textarea>
                </div>
            </div>
            <div class="outer-right">
                <div class="FirstAnswer">
                    <form action="/database.php">
                        <label for="FirstAnswer">First Dialogue Choice:</label><br>
                        <input type="text" id="FirstAnswer" name="FirstAnswer" title="The first player dialogue choice. Must always be filled, otherwise you get stuck. Keep under 100 characters."><br><br>
                        <label for="GoToID1">Go To ID 1:</label><br>
                        <input type="number" id="GoToID1" name="GoToID1" title="The first Go To ID must always be filled. Fill in the ID of the dialogue you want the choice to lead to. '-1' means ending the conversation."><br><br>
                        <label for="DoOnce1">Do once:</label><br>
                        <input type="checkbox" id="DoOnce1" name="DoOnce1" checked="false" title="Check if this dialogue option should only be shown once"><br><br>

                        <div class="AIbtns"><input type="button" id="AIGenerate1" name="AIGenerate1" value="AI Generate" title="Queries OpenAI GPT for a dialogue line based on the current NPC dialogue line and your first dialogue choice. Automatically creates a new database entry. Needs a working OpenAI API key and an OpenAI payment plan."></div><br><br>
                        <div class="lds-dual-ring" id="textAiSpinner1"></div><!-- Spinning Loader from https://loading.io/css -->
                    </form>
                <div class="SecondAnswer">
                    <form action="/database.php">
                        <label for="SecondAnswer">Second Dialogue Choice:</label><br>
                        <input type="text" id="SecondAnswer" name="SecondAnswer" title="The second player dialogue choice. Optional, can be kept empty. Keep under 100 characters."><br><br>
                        <label for="GoToID2">Go To ID 2:</label><br>
                        <input type="number" id="GoToID2" name="GoToID2" title="Must be filled if you have a second dialogue choice. Fill in the ID of the dialogue you want the choice to lead to. '-1' means ending the conversation."><br><br>
                        <label for="DoOnce2">Do once:</label><br>
                        <input type="checkbox" id="DoOnce2" name="DoOnce2" checked="false" title="Check if this dialogue option should only be shown once"><br><br>

                        <div class="AIbtns"><input type="button" id="AIGenerate2" name="AIGenerate2" value="AI Generate" title="Queries OpenAI GPT for a dialogue line based on the current NPC dialogue line and your second dialogue choice. Automatically creates a new database entry. Needs a working OpenAI API key and an OpenAI payment plan."></div><br><br>
                        <div class="lds-dual-ring" id="textAiSpinner2"></div><!-- Spinning Loader from https://loading.io/css -->
                    </form>
                </div>
                <div class="ThirdAnswer">
                    <form action="/database.php">
                        <label for="ThirdAnswer">Third Dialogue Choice:</label><br>
                        <input type="text" id="ThirdAnswer" name="ThirdAnswer"title="The third player dialogue choice. Optional, can be kept empty. Keep under 100 characters."><br><br>
                        <label for="GoToID3">Go To ID 3:</label><br>
                        <input type="number" id="GoToID3" name="GoToID3"title="Must be filled if you have a third dialogue choice. Fill in the ID of the dialogue you want the choice to lead to. '-1' means ending the conversation."><br><br>
                        <label for="DoOnce3">Do once:</label><br>
                        <input type="checkbox" id="DoOnce3" name="DoOnce3" checked="false" title="Check if this dialogue option should only be shown once"><br><br>

                        <div class="AIbtns"><input type="button" id="AIGenerate3" name="AIGenerate3" value="AI Generate" title="Queries OpenAI GPT for a dialogue line based on the current NPC dialogue line and your third dialogue choice. Automatically creates a new database entry. Needs a working OpenAI API key and an OpenAI payment plan."></div><br><br>
                        <div class="lds-dual-ring" id="textAiSpinner3"></div><!-- Spinning Loader from https://loading.io/css -->
                    </form>
                </div>
                <div class="FourthAnswer"></div>
                    <form action="/database.php">
                        <label for="FourthAnswer">Fourth Dialogue Choice:</label><br>
                        <input type="text" id="FourthAnswer" name="FourthAnswer"title="The fourth player dialogue choice. Optional, can be kept empty. Keep under 100 characters."><br><br>
                        <label for="GoToID4">Go To ID 4:</label><br>
                        <input type="number" id="GoToID4" name="GoToID4"title="Must be filled if you have a fourth dialogue choice. Fill in the ID of the dialogue you want the choice to lead to. '-1' means ending the conversation."><br><br>
                        <label for="DoOnce4">Do once:</label><br>
                        <input type="checkbox" id="DoOnce4" name="DoOnce4" checked="false" title="Check if this dialogue option should only be shown once"><br><br>

                        <div class="AIbtns"><input type="button" id="AIGenerate4" name="AIGenerate4" value="AI Generate" title="Queries OpenAI GPT for a dialogue line based on the current NPC dialogue line and your fourth dialogue choice. Automatically creates a new database entry. Needs a working OpenAI API key and an OpenAI payment plan."></div><br><br>
                        <div class="lds-dual-ring" id="textAiSpinner4"></div><!-- Spinning Loader from https://loading.io/css -->
                    </form>
                </div>
            </div>
        </div>
    </inputs>
    <div class="AiOptionsParent">
        <div class="top-btn"><button id= "changeTextGenSettings" title="Change text generation settings">Change Text AI Settings</button></div>
        <div class="AiOptions">
            <form>
                <label for="aiCharDescription">OpenAI Character Description:</label><br>
                <textarea id="aiCharDescription" name="aiCharDescription" rows="4" cols="50" title="A character description used by OpenAI for text generation"></textarea><br><br>

                <label for="aiCharQuote">OpenAI Character Quote:</label><br>
                <textarea id="aiCharQuote" name="aiCharQuote" rows="4" cols="50" title="A character quote used by OpenAI for better quality text generation"></textarea><br><br>

                <label for="aiStaticPrompt">OpenAI Static Prompt:</label><br>
                <textarea id="aiStaticPrompt" name="aiStaticPrompt" rows="4" cols="50" title="Only change if you are unsatisfied with the text generation quality and you know what you are doing. I suggest looking how the original static prompt is written before changing it"></textarea><br><br>

                <div class="top-btn"><button id= "saveAiSettings" title="Save the OpenAi text generation settings">Save all AI Settings</button></div>
            </form>
        </div>
    </div>
    <AiAudioGenerator>
        <div class="UtilityBtns">
                <div class="VoiceAIbtns"><button id= "aivoice" title="Add a new dialogue">Generate AI Voice</button></div>
                <div class="lds-dual-ring" id="voiceAiSpinner"></div><!-- Spinning Loader from https://loading.io/css -->
                <div class="VoiceAIbtns"><button id= "toggleAiVoices" title="Show your saved AI voices">Show AI Voices</button></div>
                <div class="db-wrapper">
                    <div class="AiStorageList"><ul id="AiVoiceList"></ul></div>
                </div>
                <div class="VoiceAIbtns"><button id= "playAiVoice" title="Play the generated audio file">Play AI Voice</button></div>
                <div class="VoiceAIbtns"><button id= "dlAiVoice" title="Save the generated audio file">Save AI Voice</button></div>
        </div>
    </AiAudioGenerator>
    <dbList>
        <div class="db-wrapper">
            <div class="storageList"><ul id="localStorageList"></ul></div>
            <div class="delete-btn"><button id= "deleteEntry">Delete Entry</button></div>
        </div>
    </dbList>
    <script src="dist/main.bundle.js"></script>
    <!-- <script src="dist/index.bundle.js"></script> -->
    <!-- <script src="index.js"></script> -->
    <!-- <script src="main.js"></script> -->
</body>
</html>